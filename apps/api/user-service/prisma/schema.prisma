generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/@internal/prisma-user-client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model UserProfile {
  id              String   @id @default(uuid())
  userId          String   @unique @map("user_id")
  firstName       String?  @map("first_name")
  lastName        String?  @map("last_name")
  email           String   @unique
  dateOfBirth     DateTime? @map("date_of_birth")
  educationLevel  String?  @map("education_level")
  currentRole     String?  @map("current_role")
  location        String?
  experienceYears Int?     @map("experience_years")
  bio             String?
  role            String   @default("USER")
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  skills      Skill[]
  interests   Interest[]
  assessments AssessmentResult[]

  @@map("user_profiles")
}

model Skill {
  id          String   @id @default(uuid())
  userId      String   @map("user_id")
  skillName   String   @map("skill_name")
  proficiency String?
  yearsExp    Int?     @map("years_exp")
  createdAt   DateTime @default(now()) @map("created_at")

  userProfile UserProfile @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@map("skills")
}

model Interest {
  id           String   @id @default(uuid())
  userId       String   @map("user_id")
  interestName String   @map("interest_name")
  priority     Int?
  createdAt    DateTime @default(now()) @map("created_at")

  userProfile UserProfile @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@map("interests")
}

model AssessmentResult {
  id             String   @id @default(uuid())
  userId         String   @map("user_id")
  assessmentType String   @map("assessment_type")
  score          Decimal
  details        String?
  completedAt    DateTime @map("completed_at")
  createdAt      DateTime @default(now()) @map("created_at")

  userProfile UserProfile @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@map("assessment_results")
}
